{% extends 'base.html' %}

{% load static %}

{% block script %}
<script>
    var today = new Date(new Date().setDate(new Date().getDate()));
    $(document).ready(function() {
        $(function() {
            $( "#my_date_picker" ).datepicker({
                dateFormat: 'yy-mm-dd',
                defaultDate: today
            });
        });
    })
</script>
{% endblock %}

{% block content %}
{{ form.media }}
<script type="text/javascript" src="{% static "ckeditor/ckeditor-init.js" %}"></script>
<script type="text/javascript" src="{% static "ckeditor/ckeditor/ckeditor.js" %}"></script>
<div class="container my-5">
    <div class="row">
        {% if edit %}
        <div class="col-12 mb-4">
                <h3>Update: {{ instance.recipe_name_custom|title }}</h3>
        </div>
        {% endif %}
        <div class="col-12">
            <form method="post" class="row" id="recipeForm">
                {% csrf_token %}
                {{ form.errors }}
                {% for field in form %}
                    {% if field.auto_id == 'id_recipe_alterations' or  field.auto_id == 'id_recipe_notes' or field.auto_id == 'id_recipe_full_ingredients' or field.auto_id == 'id_recipe_full_steps' %}
                        <div class="col-12">
                            <label for="{{ field.auto_id }}" class="form-label">{{ field.label }}</label>
                        </div>
                        <div class="mb-3 col-12">
                        {{ field }}
                        </div>
                            
                    {% elif field.auto_id == 'id_recipe_instantpot' %}
                        <div class="mb-3 col-12">
                                {{ field }}
                                <label for="{{ field.auto_id }}" class="form-check-label">{{ field.label }}</label>
                        </div>

                    {% else %}
                        <div class="mb-3 col-lg-6">
                            <label for="{{ field.auto_id }}" class="form-label">{{ field.label }}</label>
                            {{ field }}
                        </div>
                    {% endif %}
                {% endfor %}
            </form>
            {% if edit %}
            <form class="row" method="post" action="{% url 'recipes:recipe_delete' instance.id  %}" id="deleteForm">
                {% csrf_token %}
            </form>
            {% endif %}
            <!-- Buttons -->
            <div class="row my-5">
                {% if edit %}
                <div class="col-md-6 text-center">
                    <button class="btn btn-primary w-50" type="submit" value="Update" form="recipeForm">Update <i class="fas fa-pen"></i></button>
                </div>
                <div class="col-md-6 text-center">
                    <button class="btn btn-danger w-50" type="submit" value="Delete" form="deleteForm">Delete <i class="fas fa-trash-alt"></i></button>
                </div>
                {% else %}
                <div class="col-12 text-center">
                    <button class="btn btn-primary w-50" type="submit" value="Submit" form="recipeForm">Submit <i class="fas fa-plus"></i></button>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}